matrix:
  include:
    - language: python
      sudo: false
      python:
      - '2.7'
      install:
      - python setup.py install
      script:
      - python test/test.py
      - python test/test_oldindex.py
    - language: c
      sudo: required
      compiler: gcc
      env:
      - VALGRIND_TEST_ON=1
      before_install:
      - sudo apt-get install -qq valgrind
      script:
      - make
      - source test/test_c.sh  # valgrind test is applied when VALGRIND_TEST_ON=1
      - source test/test_c_oldindex.sh  # test for old index
